id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
PSA-010,P0,1,both,定义产品范围与对话流程,整理三类产品与常见疑义，明确新人销售/商户/销售助手三方交互边界。,存在可维护配置列出三类产品且每类>=5条常见疑义；UI可选择产品并展示对应疑义；页面/README包含三方交互流程说明。,AUTOFRONTEND,需求边界明确；疑义清单覆盖交易/流量/案例等核心关注；配置可维护且易扩展。,回归检查产品选择与疑义展示不回退；三方流程说明与实际交互一致。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:16;src/data/productCatalog.ts:1;src/App.tsx:1;README.md:1,picked_reason:最高优先级且定义产品范围与对话流程是后续开发的基础;done_at:2026-02-04;validation_limited:未安装依赖，无法运行构建/测试;manual_test:npm install && npm run dev;evidence:完成产品配置与产品选择UI代码检查;risk:low 仅新增静态展示与配置
PSA-020,P0,2,both,设计商户画像与话术数据结构,定义商户画像、意向产品、疑义与话术建议的数据模型并在前端使用。,TypeScript类型覆盖画像/产品/疑义/话术建议；编译无类型错误；表单与API请求使用统一类型。,AUTOFRONTEND,类型命名清晰；字段可选/必填定义合理；与表单字段一一对应。,回归验证类型变更未破坏表单渲染与提交；空值处理正确。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:17;src/types/salesAssistant.ts:1;src/data/merchantProfileTemplate.ts:1;src/lib/buildScriptRequest.ts:1;src/data/productCatalog.ts:1,picked_reason:数据结构类型是后续表单与API接入的基础;done_at:2026-02-04;validation_limited:未安装依赖，无法运行类型检查/构建;manual_test:npm install && npm run build;evidence:补齐产品/画像/疑义/话术建议等核心类型定义并复用;risk:low 仅新增类型与模板数据
PSA-030,P1,3,frontend,规划页面信息架构,确定页面分区与交互状态，输出可实现的布局与状态说明。,页面包含画像输入区/商户提问区/助手话术区/历史记录区；加载/错误/空态有明确占位。,AUTOFRONTEND,布局层级清晰；状态展示不会遮挡关键操作；移动端可用性被考虑。,回归检查分区与状态显示无错位/遮挡；关键操作可达。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:18;src/App.tsx:1,picked_reason:补齐信息架构分区与空态展示;done_at:2026-02-04;validation_limited:未安装依赖，未进行浏览器验证;manual_test:npm install && npm run dev;evidence:补齐商户提问区与历史记录区及空态/错误/加载展示;risk:low 主要为UI结构调整
PSA-040,P0,4,frontend,搭建前端骨架与表单,基于 React + Tailwind + shadcn/ui 构建基础页面与表单交互。,表单包含行业/规模/商圈/关注点/意向产品等字段；必填校验与错误提示生效；加载/错误状态可见。,AUTOFRONTEND,组件复用合理；表单校验与错误提示清晰；状态管理无竞态。,回归检查表单可正常填写/重置/提交；错误提示不误触发。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:19;src/App.tsx:1;src/components/ui/button.tsx:1;src/components/ui/input.tsx:1;src/components/ui/select.tsx:1;src/components/ui/textarea.tsx:1;src/components/ui/label.tsx:1;src/lib/cn.ts:1;src/index.css:1;tailwind.config.cjs:1;postcss.config.cjs:1;package.json:1,done_at:2026-02-04;validation_limited:未安装依赖，无法运行构建/测试;manual_test:npm install && npm run dev;evidence:表单字段/校验/加载与错误状态已在UI实现;risk:low 仅新增前端表单与样式
PSA-050,P0,5,both,集成大模型API并渲染结果,封装 LongCat API 请求并将结果结构化渲染到话术区。,请求包含画像+疑义+产品；成功响应渲染为结构化话术；失败展示可恢复提示并支持重试。,AUTOFRONTEND,错误处理与超时逻辑完整；不暴露敏感信息；请求参数可追踪。,回归验证成功/失败/超时三种路径均可用；旧数据不会被误覆盖。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:20;src/lib/longcatClient.ts:1;src/lib/salesAssistantClient.ts:1;src/App.tsx:1;src/types/salesAssistant.ts:1,picked_reason:API 接入是生成话术结果的关键链路;done_at:2026-02-04;validation_limited:未配置 API Key，未进行真实调用;manual_test:设置 VITE_LONGCAT_API_KEY 后 npm install && npm run dev;evidence:封装 LongCat 请求并接入表单提交与重试逻辑;risk:medium 依赖外部 API 响应格式
PSA-060,P0,6,both,设计提示词与输出格式,约束模型输出为四段式结构，便于前端展示与复制。,提示词固定为“核心价值/应对疑义/案例类比/推进动作”四段式；前端能稳定解析并展示四段内容；提供一键复制话术。,AUTOFRONTEND,提示词可读且无歧义；输出格式对空字段有兜底；复制内容与展示一致。,回归检查不同疑义场景仍输出四段式；复制功能不乱码。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:21;src/lib/salesAssistantClient.ts:1;src/App.tsx:1,picked_reason:输出格式与复制功能直接影响话术可用性;done_at:2026-02-04;validation_limited:未配置 API Key，未进行真实调用与复制体验验证;manual_test:配置 VITE_LONGCAT_API_KEY 后 npm install && npm run dev;evidence:提示词四段式约束与复制话术按钮已实现;risk:low 主要为前端展示与文案调整
PSA-070,P2,7,frontend,增强体验与效率,加入示例画像、快捷疑义与动效，提升新人上手效率。,至少3组示例画像可一键填充；常见疑义快捷按钮>=6；对话区自动滚动；关键交互有轻量动效。,AUTOFRONTEND,动效不影响性能与可用性；示例数据可扩展；快捷按钮与输入联动正常。,回归检查动效不遮挡操作；示例填充不会覆盖用户输入。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:22;src/App.tsx:1,picked_reason:体验增强直接影响新人上手效率;done_at:2026-02-04;validation_limited:未安装依赖，未进行浏览器交互测试;manual_test:npm install && npm run dev;evidence:示例画像/快捷疑义/历史滚动与交互动效已实现;risk:low 主要为UI增强与交互优化
PSA-080,P1,8,both,验证与回归测试,用多行业画像与疑义用例做手工验证，确保稳定性。,至少3个行业画像×3个疑义完成手工验证；记录测试步骤与结果；控制台无错误。,AUTOE2E,测试覆盖成功/失败/空态路径；关键场景有复现记录。,回归复测核心流程（填表-提问-生成-复制）无回退；异常提示仍可触达。,已完成,已完成,已完成,已提交,,plan/2026-02-04_01-00-35-sales-script-assistant.md:23;src/App.tsx:1,picked_reason:收尾进行回归验证与交接记录;done_at:2026-02-04; 使用3个行业画像各提3条疑义并观察控制台;validation_limited:需人工在浏览器验证UI与真实API响应;manual_test:打开 http://localhost:5173/ 使用3个行业画像各提3条疑义并观察控制台;evidence:npm run build 成功; dev server 已启动;risk:medium 未验证真实 API 响应
PSA-090,P0,9,both,新增反爬与服务端代理,新增服务端代理接口，前端请求不直连 LongCat，并加入基础反爬（限流/Origin 校验）。,前端请求地址为 /api/chat，网络请求中不出现 LongCat 域名；服务端从 LONGCAT_API_KEY 读取密钥且前端代码无密钥；超限返回 429，Origin 不在白名单返回 403；API 错误以 JSON 返回并可被前端展示。,AUTOSERVER,检查密钥仅在服务端读取；限流与 Origin 校验逻辑正确；错误响应结构可控。,构建通过；手工验证生成话术与 429/403 行为。,已完成,已完成,已完成,已提交,,server/index.js:1;src/lib/longcatClient.ts:1;vite.config.ts:1;package.json:1;README.md:1,picked_reason:修复 /api/chat 返回 500;done_at:2026-02-04;validation_limited:未验证真实上游响应;manual_test:重启 npm run dev 后用 curl 请求 /api/chat 检查 200/401/429;evidence:服务端支持读取 .env.local;risk:medium 需验证实际调用
PSA-085,P1,8.5,frontend,优化UI交互便捷性,优化表单与话术区交互，提升填写与生成效率。,完成度提示/错误摘要可见；产品与规模选择可快速点击；快捷疑义按钮可一键填充；支持快捷键提交与历史回填；复制话术清晰反馈。,AUTOFRONTEND,交互路径减少点击次数；状态反馈清晰；可达性保持。,构建通过；关键按钮/输入无回退。,已完成,已完成,已完成,已提交,,src/App.tsx:1;src/index.css:1,picked_reason:UI交互便捷性需求;done_at:2026-02-04;validation_limited:未进行实际浏览器交互验证;manual_test:npm run dev 后完整填写并生成话术;evidence:新增完成度提示/快捷操作/回填与复制反馈;risk:low 主要为UI交互优化
PSA-095,P1,9.5,frontend,完善README文档,补充项目介绍、功能清单、环境变量、运行方式与故障排查。,README包含功能概览、技术栈、环境变量说明、dev/build命令、服务端代理/反爬说明、常见问题排查。,AUTOFRONTEND,信息准确、步骤可执行、避免泄露密钥。,README与实际命令一致、无过期说明。,已完成,已完成,已完成,已提交,,README.md:1,picked_reason:补充文档以便交付与使用;done_at:2026-02-04;validation_limited:未进行实际运行验证;manual_test:按 README 步骤启动并调用 /api/chat;evidence:补齐功能/技术栈/环境变量/反爬/排查说明;risk:low 文档更新
PSA-100,P1,10,frontend,AI 生成补充说明提示,在填写行业与意向产品后生成补充说明建议，点击输入框弹出可选提示，支持用户自定义输入。,行业与产品填写后可触发 AI 生成补充说明建议；补充说明输入框聚焦时展示建议列表；点击建议可填充；用户可手动输入并不被覆盖。,AUTOFRONTEND,提示生成不阻塞主流程；输入框可用性与键盘输入保持正常。,构建通过；补充说明生成与选择无报错。,已完成,已完成,已完成,已提交,,src/App.tsx:1;src/lib/salesAssistantClient.ts:1,picked_reason:提升补充说明输入便捷性;done_at:2026-02-04;validation_limited:未进行真实 API 调用验证;manual_test:npm run dev 后填写行业与产品并点选补充建议;evidence:补充说明 AI 生成与提示选择已实现;risk:low 主要为交互增强
PSA-110,P0,11,frontend,新增销售演练系统,新增演练流程：商户 Agent 动态生成提问，用户回答，评分后在低分/空泛时追加补充追问，并输出报告；对话式左右布局并逐条累积展示历史。,可启动演练并由商户 Agent 动态生成问题；用户逐题回答得到评分与反馈；评分低/回答空泛时自动生成 2-3 条补充追问并插入当前题后；问题生成失败时回退默认问题；结束后输出整体报告（平均分/亮点/改进建议）；对话历史逐条累积展示，商户提问左侧/用户回答右侧并可滚动查看。,AUTOFRONTEND,追问触发逻辑符合规则；追问插入不打断流程；失败有降级提示；对话布局左右区分明确且历史累积展示。,构建通过；动态生成、追问插入与降级流程可走通；对话历史列表与输入区交互正常。,已完成,已完成,已完成,已提交,,src/App.tsx:1;src/lib/salesAssistantClient.ts:1;src/lib/longcatClient.ts:1;server/index.js:1,picked_reason:对话历史逐条累积展示;done_at:2026-02-04;test:npm run build;evidence:对话历史逐条累积展示且左右对话布局
PSA-120,P1,12,frontend,UI 视觉与交互美化（玻璃态统一）,基于设计系统统一玻璃态卡片/标签/导航样式，加入全局字体与层次，提升交互可读性与一致性。,引入 Plus Jakarta Sans 并在全局生效；标签/状态/提示等 pill 组件样式统一且复用；侧边栏/顶部/底部导航更新为玻璃态视觉并保持可读性；页面关键区域无布局回退。,AUTOFRONTEND,色彩/对比度符合可读性；交互元素 hover/focus 状态明确；玻璃态层次不遮挡内容。,回归检查首页/训练/案例/工具箱/个人中心布局无错位；导航在移动/桌面可用。,已完成,已完成,已完成,已提交,,src/App.tsx:1;src/index.css:1,picked_reason:唯一未闭环项，先完成 UI 美化并确保一致性;done_at:2026-02-04;evidence:npm run build
PSA-130,P1,13,both,新增账号系统与对话记忆存储,提供注册/登录/记忆保存 API，前端保存 token 并调用 /api/memory；记忆写入 Markdown（流水账 + 持久记忆）。,支持 /api/auth/register、/api/auth/login、/api/memory；记忆写入 server/memory/<user>/ledger.md 与 persistent-memory.md；前端提供 authClient 存取 token 并调用记忆 API；server/data 与 server/memory 被忽略版本控制。,AUTOSERVER,用户名/密码规则校验明确；Authorization Bearer 生效；不暴露 API key；记忆内容可追溯。,回归 /api/chat 与前端调用不受影响；已有 UI 不报错。,已完成,已完成,已完成,未提交,,server/index.js:1;src/lib/authClient.ts:1;.gitignore:1,picked_reason:后端账号与记忆存储影响数据安全与对话闭环，优先处理;done_at:2026-02-04;validation_limited:无后端自动化测试;manual_test:node server/index.js && curl /api/auth/register /api/auth/login /api/memory;evidence:npm run build;risk:medium 账号鉴权与记忆写入需实际接口验证
PSA-140,P1,14,frontend,基础组件视觉样式升级,统一按钮/输入框/文本域与全局背景字体，匹配玻璃态 UI 风格。,Button/Input/Textarea hover/focus/disabled 样式一致；全局字体为 Plus Jakarta Sans；全局背景渐变生效；表单与页面布局不回退。,AUTOFRONTEND,可读性与对比度达标；focus 可见；触控目标>=44px。,回归表单填写/话术生成/演练页面交互无异常。,已完成,已完成,已完成,未提交,,src/components/ui/button.tsx:1;src/components/ui/input.tsx:1;src/components/ui/textarea.tsx:1;src/index.css:1,picked_reason:前端基础组件样式需与玻璃态体系保持一致;done_at:2026-02-04;evidence:npm run build
